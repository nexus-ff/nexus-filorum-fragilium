<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>nexus filorium fragilium</title>

<style>
/* === Grundlayout === */
body {
  font-family: "Courier New", monospace;
  background-color: #fff;
  color: #000;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  text-align: center;
}

/* Container für Text + Cursor */
#typewriter {
  margin-top: 60px;
  white-space: pre;
  font-size: 1.3rem;
  line-height: 1.6;
  display: inline-block;
  position: relative;
}

/* Cursor */
#cursor {
  display: inline-block;
  width: 0.9ch;
  height: 1.3rem;
  background: black;
  margin-left: 2px;
  animation: blink 0.7s infinite;
  vertical-align: bottom;
}

@keyframes blink {
  50% { opacity: 0; }
}

/* Passwort + Button */
.input-wrap {
  margin-top: 40px;
  display: flex;
  justify-content: center;
  gap: 12px;
}

input[type="password"] {
  background: #222;               /* dunkles Grau */
  color: #ccc;                    /* Textfarbe */
  border: 2px solid #000;         
  border-radius: 10px;
  padding: 12px 16px;
  font-size: 1rem;
  width: 220px;
}

input::placeholder {
  color: #aaa;                    /* heller grauer Placeholder */
}

button {
  background: #000;
  color: #fff;
  border: 2px solid #000;
  padding: 12px 18px;
  border-radius: 10px;
  font-size: 1rem;
}

/* Schwarzer, dünner Pfeil */
#arrow {
  margin: 0 auto;
  width: 2px;
  background: #000;
  position: relative;
  opacity: 0;
  transform: translateY(-20px);
  transition: opacity 1.4s ease, transform 1.4s ease;
}

#arrow::after {
  content: "";
  position: absolute;
  bottom: -10px;
  left: -4px;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 10px solid black;
}
</style>
</head>

<body>

<div id="typewriter">
  <span id="typed"></span><span id="cursor"></span>
</div>

<div id="arrow"></div> 

<div class="input-wrap">
  <input id="passwordInput" type="password" placeholder="Введи пароль..." />
  <button onclick="checkPassword()">Войти</button>
</div>

<script>
/* === OFFSET der Zeilen === */
/* Werte von dir: 3 – 0 – 1 – 4 */
const offsets = [3, 0, 1, 4];

const lines = [
  "Их много,",
  "они сплитены",
  "и наравят порваться.",
  "Не рви их."
];

const typed = document.getElementById("typed");
const cursor = document.getElementById("cursor");
const arrow = document.getElementById("arrow");

let lineIndex = 0;
let charIndex = 0;

/* === Geschwindigkeit des Tippens (anpassbar) === */
function delay() { return Math.floor(Math.random() * 120) + 50; }

function typeWriter() {
  const line = lines[lineIndex];

  /* Cursor vor den Text setzen */
  cursor.style.transform = "translateX(" + (offsets[lineIndex] * 0.6) + "rem)";

  if (charIndex < line.length) {
    if (charIndex === 0) {
      typed.textContent += " ".repeat(offsets[lineIndex]);
    }

    typed.textContent += line[charIndex];
    charIndex++;
    setTimeout(typeWriter, delay());
  } else {
    lineIndex++;
    charIndex = 0;

    if (lineIndex < lines.length) {
      typed.textContent += "\n";
      setTimeout(typeWriter, 400);
    } else {
      cursor.style.opacity = 1;
      cursor.style.animation = "blink 0.7s infinite";

      /* === Pfeil einblenden === */
      setTimeout(() => {
        arrow.style.height = "120px";
        arrow.style.opacity = "1";
        arrow.style.transform = "translateY(0)";
      }, 800);
    }
  }
}

typeWriter();

/* Pfeil verschwindet, wenn man ins Eingabefeld klickt */
document.getElementById("passwordInput").addEventListener("focus", () => {
  arrow.style.opacity = "0";
  arrow.style.transform = "translateY(20px)";
});

/* === Passwortprüfung === */
const correctPassword = "нити";

function checkPassword() {
  const val = document.getElementById("passwordInput").value;

  if (val === correctPassword) {
    fetch('/api/notify', { method: 'POST' });
    alert("✅ Добро пожаловать.");
  } else {
    alert("❌ Неверный пароль.");
  }
}
</script>

</body>
</html>
