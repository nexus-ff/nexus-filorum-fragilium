<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>nexus filorium fragilium</title>

<style>
:root {
  --fg: #000;
  --bg: #fff;
  --mono: "Courier New", "Lucida Console", monospace;
  --input-bg: #1a1a1a;
  --input-text: #ccc;
}

/* Allgemeines Layout */
body {
  background: var(--bg);
  color: var(--fg);
  font-family: var(--mono);
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

.page-wrap {
  max-width: 650px;
  padding: 20px;
  margin: 0 auto;
}

/* =========================
   TYPEWRITER
========================= */
#typed-container {
  margin-top: 20px;
  text-align: center;
  white-space: pre-wrap;
  line-height: 1.35;
  font-size: 1.25rem;
  position: relative;
}

/* Cursor – absolut, nicht springend */
#cursor {
  position: absolute;
  width: 0.85rem;
  height: 1.25rem;
  background: #000;
  animation: blink .6s infinite step-end;
  transform: translate(2px, 0);
}

@keyframes blink { 50% { opacity: 0; } }

/* =========================
   LOGINBEREICH
========================= */
#loginBlock {
  position: fixed;
  top: 58%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  z-index: 20;
}

/* Pfeil */
#arrow {
  width: 0.7px;
  background: #000;
  margin: 0 auto;
  position: relative;

  opacity: 0;
  transform: translateY(-15px);
  transition: opacity .8s ease, transform .8s ease;
}

/* Pfeilspitze */
#arrow::after {
  content: "";
  position: absolute;
  bottom: -10px;
  left: 50%;
  transform: translateX(-50%);
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 10px solid #000;
}

/* Eingabezeile */
#inputRow {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
}

/* Passwortfeld */
#passwordInput {
  padding: 10px 12px;
  background: var(--input-bg);
  color: var(--input-text);
  border: 2px solid #000;
  border-radius: 6px;
  font-size: 16px;
  width: 170px;
}
#passwordInput::placeholder { color: #888; }

/* Button */
#loginBtn {
  padding: 10px 14px;
  font-size: 16px;
  background: #000;
  color: #fff;
  border: 2px solid #000;
  border-radius: 6px;
  cursor: pointer;
}

/* Fehlermeldung */
#errorMessage {
  color: #b00020;
  margin-top: 6px;
  font-size: .95rem;
  min-height: 1.3em;
}

/* =========================
   CONTENT
========================= */
#content {
  display:none;
  margin-top: 260px;
  white-space: pre-wrap;
  line-height: 1.45;
  font-size: 1.05rem;
}

img {
  display: block;
  margin: 20px auto 0;
  width: 100%;
  max-width: 320px;
  border: 2px solid #000;
  border-radius: 10px;
  cursor: pointer;
  transition: 0.2s;
}
img:hover {
  transform: scale(1.03);
}

</style>
</head>

<body>

<div class="page-wrap">

  <!-- TYPEWRITER -->
  <div id="typed-container">
    <span id="typed"></span><span id="cursor"></span>
  </div>

  <!-- LOGINBLOCK FIXIERT -->
  <div id="loginBlock">
    <div id="arrow"></div>

    <div id="inputRow">
      <input id="passwordInput" type="password" placeholder="Введи пароль..." />
      <button id="loginBtn">Войти</button>
    </div>

    <div id="errorMessage"></div>
  </div>

  <!-- CONTENT -->
  <div id="content">

<h2>Не рви — а распутывай</h2>

<em><strong>НИТИ</strong>

Внезапное призрение
- В голову бьют подозрения
А что если всё обман? -
нереальность и лож?
Этот лапочка в своём
подвале насмехаясь точит нож?

Убить бы свою наивность!
- поверила опять!
Сколько раз самой себе же,
вдабливая, повторять...
Что нету справедливости -
Некому полностью доверять!
Так проверим же на лживость
Самозванца опять!!

Чёрными слезами
Образуется огромная лужа.
Я чёрная в нутри -
И я чёрная снаружи!

Пусти!
Я обрываю <strong>нашу нить!</strong>
Оставь! Уйди!
Мне больно в тебя верить!
</em>


<img id="mainImage" src="image/IMG_8462.JPG" alt="Bild 1">

  </div>

</div>

<script>
/* ===========================
   MULTILINE TYPEWRITER
=========================== */

const lines = [
  "Их много,",
  "они сплетены",
  "и норовят порваться.",
  "Не рви их."
];

const typed = document.getElementById("typed");
const cursor = document.getElementById("cursor");
const arrow = document.getElementById("arrow");

let lineIndex = 0;
let charIndex = 0;

/* Cursorhöhe dynamisch */
function updateCursorPosition() {
  const text = typed.innerText;
  const linesCount = text.split("\n").length;
  const lineHeight = parseFloat(getComputedStyle(typed).lineHeight);

  cursor.style.top = (linesCount - 1) * lineHeight + "px";
}

/* Pfeillänge berechnen */
function updateArrowLength() {
  const topBox = document.getElementById("typed-container").getBoundingClientRect();
  const loginBox = document.getElementById("loginBlock").getBoundingClientRect();

  const dist = loginBox.top - topBox.bottom - 12;
  arrow.style.height = dist + "px";
}

/* TYPEWRITER */
function randomDelay() {
  return Math.random() * 100 + 20;
}

function typeWriter() {
  if (lineIndex >= lines.length) {
    revealArrow();
    return;
  }

  const line = lines[lineIndex];

  if (charIndex < line.length) {
    typed.textContent += line[charIndex++];
    updateCursorPosition();
    setTimeout(typeWriter, randomDelay());
  } else {
    if (lineIndex < lines.length - 1) {
      typed.textContent += "\n";
    }
    lineIndex++;
    charIndex = 0;
    updateCursorPosition();
    setTimeout(typeWriter, 350);
  }
}

typeWriter();

/* Pfeil sichtbar machen */
function revealArrow() {
  updateArrowLength();
  arrow.style.opacity = 1;
  arrow.style.transform = "translateY(0)";
}

/* Dynamisch bei Änderung */
window.addEventListener("resize", updateArrowLength);

/* ===========================
   LOGIN
=========================== */

const correctPassword = "нити";

function checkPassword() {
  const val = document.getElementById("passwordInput").value.trim();
  const error = document.getElementById("errorMessage");

  if (val === correctPassword) {
    document.getElementById("content").style.display = "block";
    document.getElementById("loginBlock").style.display = "none";
    fetch("/api/notify", { method: "POST" });
  } else {
    error.innerHTML = "❌ Неверный пароль<br>русскими маленькими буквами";
    document.getElementById("passwordInput").value = "";
  }
}

document.getElementById("loginBtn").onclick = checkPassword;
document.getElementById("passwordInput").addEventListener("keydown", e=>{
  if (e.key === "Enter") checkPassword();
});

/* ===========================
   IMAGE TOGGLE
=========================== */
const img = document.getElementById("mainImage");
let toggled = false;

img.addEventListener("mouseenter", () => {
  img.src = "image/IMG_20251029_213356_289.jpg";
});
img.addEventListener("mouseleave", () => {
  if (!toggled) img.src = "image/IMG_8462.JPG";
});
img.addEventListener("click", () => {
  toggled = !toggled;
  img.src = toggled
    ? "image/IMG_20251029_213356_289.jpg"
    : "image/IMG_8462.JPG";
});
</script>

</body>
</html>
